# ШІ-Агент контактного центру 1580 м. Запоріжжя

Інтелектуальний голосовий агент для автоматизації обробки звернень громадян на гарячу лінію 1580 Запорізької міської ради.

## 🎯 Можливості

- **🎙️ Розпізнавання мови (ASR)** — Silero STT для української мови
- **🔊 Синтез мовлення (TTS)** — Fish Speech для природного голосу
- **📊 Класифікація запитів** — на основі офіційного класифікатора міської ради
- **👤 Передача оператору** — автоматична ескалація складних випадків
- **💾 Інтеграція з Oracle APEX** — збереження всіх звернень

## 🏗️ Архітектура

```
┌─────────────────────────────────────────────────────────┐
│                    Вхідний дзвінок                      │
│                       (1580)                            │
└─────────────────────────┬───────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────┐
│                   Voice Gateway                          │
│              (SIP/WebRTC/Twilio)                        │
└─────────────────────────┬───────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────┐
│                    Silero ASR                            │
│              (Розпізнавання голосу)                     │
│                   Українська мова                        │
└─────────────────────────┬───────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────┐
│                  Класифікатор NLU                        │
│            (Офіційний класифікатор 1580)                │
└─────────────────────────┬───────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────┐
│                   Fish Speech TTS                        │
│               (Синтез відповіді)                        │
│                 Природний голос                          │
└─────────────────────────┬───────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────┐
│                   Oracle APEX                            │
│            (Збереження звернень)                        │
└─────────────────────────────────────────────────────────┘
```

## 📦 Встановлення

### Вимоги

- **Python 3.10+**
- **Node.js 18+**
- **GPU** (рекомендовано для Fish Speech)
- **8+ GB RAM**

### Backend (Python)

```bash
cd backend
python -m venv venv
source venv/bin/activate  # Linux/Mac
# або venv\Scripts\activate  # Windows

pip install -r requirements.txt

# Встановлення Fish Speech
pip install git+https://github.com/fishaudio/fish-speech.git

# Запуск сервера
python main.py
```

### Frontend (React)

```bash
cd frontend
npm install
npm run dev      # Розробка
npm run build    # Продакшн
```

## 🚀 Використання

### API Endpoints

| Метод | Endpoint | Опис |
|-------|----------|------|
| GET | `/api/health` | Перевірка стану системи |
| POST | `/api/classify` | Класифікація тексту |
| POST | `/api/transcribe` | Транскрибування аудіо |
| POST | `/api/synthesize` | Синтез мовлення |
| WS | `/ws/call` | WebSocket для дзвінків |

### Приклад класифікації

```bash
curl -X POST http://localhost:8000/api/classify \
  -H "Content-Type: application/json" \
  -d '{"text": "У нас немає опалення вже другий день"}'
```

Відповідь:
```json
{
  "success": true,
  "classification": {
    "problem": "Інженерні мережі",
    "subtype": "відсутність опалення",
    "executor": "КП 'Запоріжтеплопостачання'",
    "urgency": "emergency",
    "response_time": 3,
    "confidence": 0.92
  }
}
```

## 🎙️ Інтеграція Fish Speech

Fish Speech — це open-source TTS модель з природним звучанням:

```python
from tts_service import synthesize_speech

# Синтез мовлення
audio_bytes, sample_rate = synthesize_speech(
    text="Вашу заявку прийнято",
    voice="default"
)
```

### Клонування голосу

Fish Speech дозволяє клонувати голос з 10-30 секунд аудіо:

```python
from tts_service import tts_service

# Клонування голосу оператора
tts_service.clone_voice(
    reference_audio=operator_audio_bytes,
    voice_id="operator_olena"
)
```

## 📋 Класифікатор

Система використовує офіційний класифікатор заявок мешканців м. Запоріжжя:

| Категорія | Підтип | Виконавець | Термін |
|-----------|--------|------------|--------|
| Благоустрій | Розчистка снігу | Управителі будинків | 24 год |
| Благоустрій | Впавше дерево | КП "Запоріжремсервіс" | 3 год |
| Інженерні мережі | Відсутність опалення | КП "Запоріжтеплопостачання" | 3 год |
| Інженерні мережі | Відсутність води | КП "Водоканал" | 2 год |
| Громадський транспорт | Скарга на водія | Департамент транспорту | 5 днів |
| Надзвичайні ситуації | Руйнування | УПНС | 1 год |

## 🔒 Безпека

- Всі дані зберігаються локально
- Інтеграція з Oracle APEX через захищений API
- Відповідність Закону про захист персональних даних
- Автоматичне сповіщення про запис дзвінка

## 📊 Статистика

Система автоматично збирає статистику:
- % автоматично вирішених дзвінків
- Найчастіші категорії звернень
- Середній час відповіді
- Кількість ескалацій на оператора

## 🛠️ Технології

- **Frontend**: React, TailwindCSS, Lucide Icons
- **Backend**: FastAPI, Python
- **ASR**: Silero STT (українська)
- **TTS**: Fish Speech
- **Database**: Oracle APEX / SQLite

## 📄 Ліцензія

Внутрішній проект Запорізької міської ради.

## 👥 Контакти

- **Email**: cti@zp.gov.ua
- **Телефон**: 1580
- **Адреса**: м. Запоріжжя, пр. Соборний, 206
